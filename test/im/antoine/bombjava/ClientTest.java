package im.antoine.bombjava;

import org.junit.Test;

import java.io.IOException;
import java.io.PrintWriter;
import java.io.Reader;
import java.io.StringReader;
import java.io.StringWriter;
import java.io.Writer;

import static org.junit.Assert.assertEquals;

public class ClientTest {

  @Test
  public void testCanSendCommands() throws IOException {
    final StringWriter w = new StringWriter();

    Client c = new Client(new Client.Opener() {
      public void open() throws IOException {
      }

      public Reader getReader() throws IOException {
        return new StringReader("");
      }

      public Writer getWriter() throws IOException {
        return w;
      }

      public void close() throws IOException {
      }
    });
    c.open();

    c.goUp();
    c.goDown();
    c.goLeft();
    c.goRight();
    c.putBomb();

    w.flush();

    assertEquals("Moves should print",
                 "up\ndown\nleft\nright\nbomb\n",
                 w.getBuffer().toString());
  }

  private String json = "{\"Turn\":124,\"TurnDuration\":33000000,\"Name\":\"p2\",\"X\":49,\"Y\":21,\"LastX\":-1,\"LastY\":-1,\"Bombs\":0,\"MaxBomb\":3,\"MaxRadius\":3,\"Alive\":true,\"Board\":[[{\"Name\":\"Wall\"},{\"Name\":\"Wall\"},{\"Name\":\"Wall\"},{\"Name\":\"Wall\"},{\"Name\":\"Wall\"},{\"Name\":\"Wall\"},{\"Name\":\"Wall\"},{\"Name\":\"Wall\"},{\"Name\":\"Wall\"},{\"Name\":\"Wall\"},{\"Name\":\"Wall\"},{\"Name\":\"Wall\"},{\"Name\":\"Wall\"},{\"Name\":\"Wall\"},{\"Name\":\"Wall\"},{\"Name\":\"Wall\"},{\"Name\":\"Wall\"},{\"Name\":\"Wall\"},{\"Name\":\"Wall\"},{\"Name\":\"Wall\"},{\"Name\":\"Wall\"},{\"Name\":\"Wall\"},{\"Name\":\"Wall\"}],[{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Rock\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"}],[{\"Name\":\"Wall\"},{\"Name\":\"p1\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Rock\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Rock\"},{\"Name\":\"Wall\"},{\"Name\":\"Rock\"},{\"Name\":\"Wall\"},{\"Name\":\"Rock\"},{\"Name\":\"Wall\"},{\"Name\":\"Rock\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"}],[{\"Name\":\"Wall\"},{\"Name\":\"Rock\"},{\"Name\":\"Rock\"},{\"Name\":\"Rock\"},{\"Name\":\"Rock\"},{\"Name\":\"Rock\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Rock\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Wall\"}],[{\"Name\":\"Wall\"},{\"Name\":\"Rock\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Rock\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Rock\"},{\"Name\":\"Wall\"},{\"Name\":\"Rock\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Rock\"},{\"Name\":\"Wall\"},{\"Name\":\"Rock\"},{\"Name\":\"Wall\"}],[{\"Name\":\"Wall\"},{\"Name\":\"Rock\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Rock\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"}],[{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Rock\"},{\"Name\":\"Wall\"},{\"Name\":\"Rock\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Rock\"},{\"Name\":\"Wall\"},{\"Name\":\"Rock\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Rock\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"}],[{\"Name\":\"Wall\"},{\"Name\":\"Rock\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Wall\"}],[{\"Name\":\"Wall\"},{\"Name\":\"Rock\"},{\"Name\":\"Wall\"},{\"Name\":\"Rock\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Rock\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Rock\"},{\"Name\":\"Wall\"},{\"Name\":\"Rock\"},{\"Name\":\"Wall\"},{\"Name\":\"Rock\"},{\"Name\":\"Wall\"},{\"Name\":\"Rock\"},{\"Name\":\"Wall\"}],[{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"}],[{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Rock\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"}],[{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Rock\"},{\"Name\":\"Rock\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"}],[{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Rock\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Rock\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Rock\"},{\"Name\":\"Wall\"},{\"Name\":\"Rock\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"}],[{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"}],[{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Rock\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Rock\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Rock\"},{\"Name\":\"Wall\"}],[{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Rock\"},{\"Name\":\"Rock\"},{\"Name\":\"Wall\"}],[{\"Name\":\"Wall\"},{\"Name\":\"Rock\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Rock\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Rock\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Rock\"},{\"Name\":\"Wall\"},{\"Name\":\"Rock\"},{\"Name\":\"Wall\"},{\"Name\":\"Rock\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"}],[{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Rock\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Wall\"}],[{\"Name\":\"Wall\"},{\"Name\":\"Rock\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Rock\"},{\"Name\":\"Wall\"},{\"Name\":\"Rock\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"}],[{\"Name\":\"Wall\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Rock\"},{\"Name\":\"Rock\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"}],[{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Rock\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Rock\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Rock\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"}],[{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Rock\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"}],[{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Rock\"},{\"Name\":\"Wall\"},{\"Name\":\"Rock\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Rock\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Rock\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"}],[{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Rock\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Wall\"}],[{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Rock\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"}],[{\"Name\":\"Wall\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"}],[{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Rock\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Rock\"},{\"Name\":\"Wall\"},{\"Name\":\"Rock\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Rock\"},{\"Name\":\"Wall\"},{\"Name\":\"Rock\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Rock\"},{\"Name\":\"Wall\"}],[{\"Name\":\"Wall\"},{\"Name\":\"Rock\"},{\"Name\":\"Rock\"},{\"Name\":\"Rock\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"}],[{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Rock\"},{\"Name\":\"Wall\"},{\"Name\":\"Rock\"},{\"Name\":\"Wall\"},{\"Name\":\"Rock\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Rock\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Rock\"},{\"Name\":\"Wall\"}],[{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Wall\"}],[{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Rock\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Rock\"},{\"Name\":\"Wall\"},{\"Name\":\"Rock\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"}],[{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Wall\"}],[{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Rock\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Rock\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Rock\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"}],[{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"}],[{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Rock\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Rock\"},{\"Name\":\"Wall\"}],[{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"}],[{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"}],[{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"}],[{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Rock\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Rock\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"}],[{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"}],[{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Rock\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Rock\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"}],[{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Rock\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"}],[{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"}],[{\"Name\":\"Wall\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"}],[{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Rock\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Rock\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"}],[{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"}],[{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Rock\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Rock\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"}],[{\"Name\":\"Wall\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"}],[{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"},{\"Name\":\"Rock\"},{\"Name\":\"Wall\"},{\"Name\":\"Ground\"},{\"Name\":\"Wall\"}],[{\"Name\":\"Wall\"},{\"Name\":\"p4\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"Rock\"},{\"Name\":\"Ground\"},{\"Name\":\"p2\"},{\"Name\":\"Wall\"}],[{\"Name\":\"Wall\"},{\"Name\":\"Wall\"},{\"Name\":\"Wall\"},{\"Name\":\"Wall\"},{\"Name\":\"Wall\"},{\"Name\":\"Wall\"},{\"Name\":\"Wall\"},{\"Name\":\"Wall\"},{\"Name\":\"Wall\"},{\"Name\":\"Wall\"},{\"Name\":\"Wall\"},{\"Name\":\"Wall\"},{\"Name\":\"Wall\"},{\"Name\":\"Wall\"},{\"Name\":\"Wall\"},{\"Name\":\"Wall\"},{\"Name\":\"Wall\"},{\"Name\":\"Wall\"},{\"Name\":\"Wall\"},{\"Name\":\"Wall\"},{\"Name\":\"Wall\"},{\"Name\":\"Wall\"},{\"Name\":\"Wall\"}]],\"GameObject\":{\"Name\":\"p2\"},\"Message\":\"\"}";


  @Test
  public void testCanDecodeJson() throws Exception {

    StringReader r = new StringReader(json);
    Client c = new Client(new Client.Opener() {
      public void open() throws IOException {
      }

      public Reader getReader() throws IOException {
        return new StringReader(json);
      }

      public Writer getWriter() throws IOException {
        return new PrintWriter(System.out);
      }

      public void close() throws IOException {
      }
    });
    c.open();

    GameState s = c.nextState();

    assertEquals("Turn", 124, s.getTurn());
    assertEquals("Duration", 33000000l, s.getTurnDuration().inNanoseconds());
    assertEquals("Message", "", s.getMessage());

    PlayerState p = s.getPlayerState();
    assertEquals("Name", "p2", p.getName());

    assertEquals("X", 49, p.getX());
    assertEquals("Y", 21, p.getY());
    assertEquals("LastX", -1, p.getLastX());
    assertEquals("LastY", -1, p.getLastY());

    assertEquals("Bombs", 0, p.getBombsPlaced());
    assertEquals("MaxBombs", 3, p.getMaxBombs());
    assertEquals("MaxRadius", 3, p.getMaxBombRadius());
    assertEquals("Alive", true, p.isAlive());

    Board b = s.getBoard();
    assertEquals("Wall on map", Board.GameObject.Wall, b.getCells()[0][0].object);
    assertEquals("Player on map", Board.GameObject.Player, b.getCells()[49][21].object);
    assertEquals("Width", 51, b.getWidth());
    assertEquals("Height", 23, b.getHeight());
  }
}
